import { Schema } from "effect"

export const WhatsAppMessageId = Schema.NonEmptyTrimmedString.pipe(Schema.brand("WhatsAppMessageId"))

export const WhatsAppMessageTextTypeType = Schema.Literal("text").pipe(
  Schema.brand("WhatsAppMessageTextTypeType")
)
export const WhatsAppMessageTextType = Schema.Struct({
  type: WhatsAppMessageTextTypeType,
  [WhatsAppMessageTextTypeType.Type]: Schema.Struct({
    preview_url: Schema.Boolean,
    body: Schema.String
  })
})

export const WhatsAppMessageSystemTypeType = Schema.Literal("system").pipe(
  Schema.brand("WhatsAppMessageSystemTypeType")
)
export const WhatsAppMessageSystemType = Schema.Struct({
  type: WhatsAppMessageSystemTypeType,
  [WhatsAppMessageSystemTypeType.Type]: Schema.Struct({
    body: Schema.String
  })
})

export const WhatsAppMessageContext = Schema.Struct({})

export const WhatsAppMessage = Schema.Union(WhatsAppMessageTextType)
